<div layout="column" class="consult-info-access" style="position: fixed;background: white;width: 100%;z-index: 2">
    <form  class="ng-valid ng-dirty" ng-submit="vm.filterInfo()">
        <div layout="row" layout-align="center center">
            <div flex="60" flex-xs="90" class="search-access-door">
                <div layout="row" flex-xs="70" flex="80">
                    <input type="text" flex class="search-access-door-input" ng-disabled="vm.consulting" ng-change="vm.checkEmptyFilter()" ng-model="vm.filter"  type="submit"
                           placeholder="Consultar">
                    <div>
                        <div>
                            <md-icon ng-class="{'pulse':vm.filterChanged}" style="font-size: 27px;margin-top: 12px;margin-right: 10px;cursor: pointer;outline: none"
                                     ng-click="vm.filterInfo()">search
                            </md-icon>
                        </div>
                    </div>
                    <div style="border-right: 1px solid gainsboro;">
                        <md-icon style="font-size: 27px;margin-top: 12px;margin-right: 10px;cursor: pointer;outline: none"
                                 ng-click="vm.filter=undefined;vm.showingData=false;vm.filterInfo()">close
                        </md-icon>
                    </div>
                </div>
                <div flex="20" flex-xs="30">
                    <h6 style="font-weight: 600;margin: 0;margin-left: 12px">FILIAL <span hide-xs hide-md>SELECCIONADA</span>
                    </h6>
                    <md-input-container class="md-block  input-res input-res1"
                                        style="margin: 0px 0px 0px 10px!important">
                        <label></label>
                        <md-select ng-model="vm.houseSelected" style="margin: 0!important;"
                                   md-on-close="vm.clearSearchTerm()"
                                   data-md-container-class="selectdemoSelectHeader"
                                   class="md-no-underline select-access"
                                   ng-change="vm.selectHouse(vm.houseSelected)">
                            <md-select-header class="demo-select-header">
                                <input ng-model="vm.searchTerm"
                                       type="search"
                                       class="demo-header-searchbox md-text"
                                       placeholder="Buscar filial..."
                                       id="searchTermSelect"
                                       ng-keydown="vm.typingSearchTerm($event)">
                            </md-select-header>
                            <md-optgroup label="Filial">
                                <md-option ng-value="-1">Todas</md-option>
                                <md-option ng-repeat="house in houses | filter:{housenumber:vm.searchTerm}"
                                           ng-value="house">
                                    {{house.housenumber}}
                                </md-option>
                            </md-optgroup>
                        </md-select>
                    </md-input-container>
                </div>
            </div>
            <div ng-if="vm.houseSelected!==-1">
                <button style="z-index:1!important;"
                        class="float-right md-fab md-raised md-mini red-button-oficial md-button md-ink-ripple"
                        type="button" style="margin-top: -5px;" ng-click="vm.showKeys(vm.houseSelected)"
                        aria-label="Ver claves">
                    <md-icon style="color:white!important" class="material-icons">
                        vpn_key
                    </md-icon>
                    <md-tooltip>Ver claves</md-tooltip>
                </button>
                <md-button style="z-index:1!important;"
                           class="float-right md-fab md-mini md-primary"
                           type="button" style="margin-top: -5px;" ng-click="vm.showPhone(vm.houseSelected)"
                           aria-label="Teléfono">
                    <md-icon style="color:white!important" class="material-icons">
                        phone
                    </md-icon>
                    <md-tooltip>Teléfono</md-tooltip>
                </md-button>
            </div>
        </div>
    </form>
    <div layout="row" layout="row" layout-align="center center">
        <div flex="40" flex-xs="100" layout="row" layout-align="space-around center">
            <div ng-class="{'active-bottom-tab-charge' : vm.queryType==3}" style="padding: 0 10px">
                <label class="width-100  outline-none label-tab-access"
                       flex
                       ng-class="{'active-tab-charge-invert-macro-small-tab' : vm.queryType==3}"
                       ng-click="vm.changeQueryType(3)"><i
                    class="material-icons material-icons-with-text icon-finanzes font-30">emoji_people</i>
                    <span hide-xs hide-sm hide-md class="font-weight-600">INVITADOS</span>
                </label>
            </div>
            <div ng-class="{'active-bottom-tab-charge' : vm.queryType==4}" style="padding: 0 10px">
                <label class="width-100   outline-none label-tab-access"
                       flex
                       ng-class="{'active-tab-charge-invert-macro-small-tab' : vm.queryType==4}"
                       ng-click="vm.changeQueryType(4)"><i
                    class="material-icons material-icons-with-text icon-finanzes font-30">transfer_within_a_station</i>
                    <span hide-xs hide-sm hide-md class="font-weight-600">EN TRÁNSITO</span>
                </label>
            </div>
            <div ng-class="{'active-bottom-tab-charge' : vm.queryType==1}" style="padding: 0 10px">
                <label
                    class="width-100  outline-none label-tab-access"
                    flex
                    ng-class="{'active-tab-charge-invert-macro-small-tab' : vm.queryType==1}"
                    ng-click="vm.changeQueryType(1)"><i
                    class="material-icons material-icons-with-text icon-finanzes font-30 we">group</i>
                    <span hide-xs hide-sm hide-md class="font-weight-600">RESIDENTES</span>
                </label>
            </div>
            <div ng-class="{'active-bottom-tab-charge' : vm.queryType==2}" style="padding: 0 10px">
                <label class="width-100 outline-none  label-tab-access"
                       flex
                       ng-class="{'active-tab-charge-invert-macro-small-tab' : vm.queryType==2}"
                       ng-click="vm.changeQueryType(2)"><i
                    class="material-icons material-icons-with-text icon-finanzes font-30">directions_car</i>
                    <span hide-xs hide-sm hide-md class="font-weight-600">VEHÍCULOS</span>
                </label>
            </div>
        </div>
    </div>
    <md-divider></md-divider>
</div>
<div layout="column"  class="col-md-12 no-padding" flex >
    <div layout="column" style="border-radius:8px;background: white" class="col-md-12 no-padding">
        <div layout="row" flex="100" class="col-md-12 no-padding">
            <div flex="100" layout="column" class="col-md-12 no-padding">
                <!--MOSTRAR RESIDENTES-->
                <div class="fade-in" layout="column" layout="column" style="margin-bottom: 25px">
                    <div ng-if="vm.queryType===1" class="col-lg-12 col-md-12 col-xs-12 no-padding fade-in"
                         infinite-scroll="vm.loadPageResidents(vm.page + 1)"
                         infinite-scroll-disabled="vm.page >= vm.links['last']"
                         infinite-scroll-container='".infinity-scroll-content"' infinite-scroll-distance="0"
                         infinite-scroll-parent="true">
                        <no-content style="margin-top: 50px!important"
                                    ng-if="vm.residents.length == 0 && vm.showingData===true" icon="group"
                                    text="No hay usuarios registrados"></no-content>
                        <div class="col-md-4 col-xs-12 col-sm-6 residentDivContainerXs no-padding fade-in"
                             ng-repeat="resident in vm.residents | filter:vm.search track by $index">
                            <md-card md-theme="{{ showDarkTheme ? 'dark-blue' : 'default' }}"
                                     class="margin-bottom-10 residentCardContainer"
                                     md-theme-watch>
                                <div layout="row" style="padding:6px">
                                    <div>
                                        <img ng-hide="resident.image_url" src="content/images/nobody-image.jpg"
                                             class="img-circle"
                                             width="100"/>
                                        <img style="cursor: pointer" data-toggle="modal" class="img-circle object-fit_scale-down-access"
                                             data-target="{{'#myModal'+resident.id}}"
                                             ng-show="resident.image_url!==null" src="{{::resident.image_url}}"/>
                                    </div>
                                    <div flex layout="column" layout-align="center">
                                        <div layout="row" layout-align="space-between center" style="margin-top: -8px">
                                            <div style="margin-left: 10px;">
                                                <span class="md-headline font-15">{{::resident.name.toUpperCase()}}  {{::resident.lastname.toUpperCase()}}</span>
                                                <span ng-if="resident.principalContact"><md-icon
                                                    style="font-size: 20px;color: #009688;cursor: pointer">assignment_ind
                                                <md-tooltip directions="right">Contacto principal</md-tooltip>
                                                </md-icon></span>
                                            </div>
                                            <div layout="row" layout-align="center"
                                                 style="background: #f4f4f4;border-radius: 9%;margin-left: 10px;padding:1px 2px;position: absolute;top: 12px;right: 28px;">
                                                <div ng-if="!resident.houseClean"><b
                                                    style="font-weight: 600;padding: 0 5px">{{::resident.house.housenumber}}</b>
                                                </div>
                                                <div ng-if="resident.houseClean"><b
                                                    style="font-weight: 600;padding: 0 5px">{{::resident.houseClean.housenumber}}</b>
                                                </div>
                                            </div>
                                        </div>
                                        <div style="margin-left: 10px">
                                            <span ng-if="resident.type==1" style="font-size: 13px;font-weight: 600"> {{::resident.identificationnumber.toUpperCase()}} - </span>
                                            <span ng-if="resident.type==1"
                                                  style="font-size: 13px">Residente propietario </span>
                                            <span ng-if="resident.type==3" style="font-size: 13px">Residente</span>
                                            <span ng-if="resident.type==4" style="font-size: 13px">Inquilino</span>
                                        </div>
                                        <div ng-if="resident.phonenumber!=undefined"
                                             style="margin-left: 10px;margin-top: 5px">
                                            <md-icon style="font-size: 20px">phone</md-icon>
                                            <span>{{::resident.phonenumber}}</span>
                                        </div>
                                    </div>
                                </div>
                            </md-card>
                        </div>
                    </div>
                    <!--VEHICULOS-->
                    <div ng-if="vm.queryType===2 && vm.isReady" class="col-lg-12 col-md-12 col-xs-12 no-padding fade-in"
                         infinite-scroll="vm.loadPageVehicules(vm.page + 1)"
                         infinite-scroll-disabled="vm.page >= vm.links['last']"
                         infinite-scroll-container='".info-container-access-door"' infinite-scroll-distance="1"
                         infinite-scroll-parent="true">
                        <no-content style="margin-top: 50px!important"
                                    ng-if="vm.vehicules.length == 0 && vm.showingData===true && vm.noDataFound ===false"
                                    icon="directions_car"
                                    text="No hay vehículos registrados"></no-content>
                        <div class="col-md-4 col-xs-12 col-sm-6 residentDivContainerXs no-padding"
                             ng-repeat="vehicule in vm.vehicules | filter:vm.search ">
                            <md-card md-theme="{{ showDarkTheme ? 'dark-blue' : 'default' }}"
                                     class="margin-bottom-10 residentCardContainer"
                                     md-theme-watch>
                                <div layout="row" style="padding:6px">
                                    <div>
                                        <i ng-if="vehicule.type=='Automóvil'"
                                           class="material-icons md-48 md-inactive md-dark circle-icon"
                                           style="color: {{vehicule.color}};padding:10px;font-size:48px"
                                           aria-hidden="true ">directions_car
                                            <md-tooltip md-direction="left" class="font-13 bold white-color">
                                                Automóvil
                                            </md-tooltip>
                                        </i>
                                        <md-icon ng-if="vehicule.type=='Motocicleta'"
                                                 class="material-icons"
                                                 style="color: {{vehicule.color}};padding:10px;font-size:48px"
                                                 aria-hidden="true ">
                                            two_wheeler
                                            <md-tooltip md-direction="left" class="font-13 bold white-color">
                                                Motocicleta
                                            </md-tooltip>
                                        </md-icon>
                                    </div>
                                    <div flex layout="column" layout-align="center">
                                        <div layout="row" layout-align="space-between center" style="margin-top: -8px">
                                            <div style="margin-left: 10px">
                                                <span class="md-headline font-15" style="font-weight: 600;">{{vehicule.licenseplate.toUpperCase()}}</span>
                                            </div>
                                            <div layout="row" layout-align="center"
                                                 style="background: #f4f4f4;border-radius: 9%;margin-left: 10px;padding:1px 2px;position: absolute;top: 12px;right: 28px;">
                                                <div><b style="font-weight: 600;padding: 0 5px">{{vehicule.houseClean.housenumber}}</b>
                                                </div>
                                            </div>
                                        </div>
                                        <div style="margin-left: 10px">
                                            <span style="font-size: 13px;">{{vehicule.brand.toUpperCase()}}</span>
                                        </div>
                                    </div>
                                </div>
                            </md-card>
                        </div>
                    </div>
                    <!--INVITADOS-->
                    <div ng-if="vm.queryType===3 && vm.isReady"
                         class="col-lg-12 col-md-12 col-xs-12 no-padding fade-in">
                        <no-content style="margin-top: 50px!important"
                                    ng-if="visitorInvited.length == 0 && vm.showingData===true && vm.noDataFound ===false"
                                    icon="face"
                                    text="No hay invitados registrados"></no-content>
                        <table class="table table-bordered  table-hover font-13 gray-font tableMaterialDesign"
                               infinite-scroll="vm.loadPageVisitor(vm.page + 1)"
                               infinite-scroll-disabled="vm.page >= vm.links['last']"
                               infinite-scroll-distance="1"
                               infinite-scroll-container="'.all-content'">
                            <thead style="background-color: #fafafa;">
                            <tr>
                                <th>Filial</th>
                                <th>Nombre completo</th>
                                <th>Cédula</th>
                                <th>Número de placa</th>
                                <th class="text-center">Acción</th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr ng-repeat="visitor in visitorInvited | orderBy:'name' track by $index" ng-if="vm.verifyVisitantInivitedDate(visitor)">
                                <form ng-submit="vm.registerVisitantFromVisitantsList(visitor)">
                                    <td><span style="font-weight: 600">{{visitor.houseNumber}}</span></td>
                                    <td>{{visitor.name + " " + visitor.lastname + " " + visitor.secondlastname}}</td>
                                    <td>
                                        <span ng-if="visitor.hasIdentification">{{visitor.identificationnumber}}</span>
                                        <md-input-container ng-if="!visitor.hasIdentification"
                                                            ng-class="{'md-input-invalid': !visitor.validCed}"
                                                            class="md-block input-acces-register"
                                                            style="margin:0;">
                                            <label></label>
                                            <input ng-class="{'input-invalid': !visitor.validCed}"
                                                   class="uppercase specialCharacters"
                                                   style="font-size:18px;"
                                                   ng-model="visitor.identificationnumber" required
                                                   ng-disabled="visitor.hasIdentification" autocomplete="off"
                                                   ng-change="vm.validateVisitorCed(visitor)">
                                            <div class="hint" style="color: #dd2c00!important">Obligatorio.</div>
                                        </md-input-container>
                                    </td>
                                    <td>
                                        <span ng-if="visitor.hasLicense">{{visitor.licenseplate}}</span>
                                        <md-input-container ng-if="!visitor.hasLicense"
                                                            ng-class="{'md-input-invalid': !visitor.validPlate}"
                                                            class="md-block input-acces-register" style="margin: 0">
                                            <label></label>
                                            <input ng-class="{'input-invalid': !visitor.validPlate}"
                                                   class="uppercase specialCharactersAndVocals" style="font-size:18px;"
                                                   ng-model="visitor.licenseplate" ng-disabled="visitor.hasLicense"
                                                   autocomplete="off" ng-change="vm.validateVisitorPlate(visitor)">
                                            <div class="hint">Opcional.</div>
                                        </md-input-container>
                                    </td>
                                    <td class="text-center">
                                        <h5 class="text-center no-margin">
                                            <md-button class="md-primary md-raised " style="margin-right: 20px;"
                                                       ng-disabled="visitor.identificationnumber==undefined || visitor.identificationnumber==' ' || visitor.identificationnumber==null"
                                                       type="submit">
                                                Reportar entrada
                                            </md-button>
                                        </h5>
                                    </td>
                                </form>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                    <!--EN TRANSITO-->
                    <div ng-if="vm.queryType===4 && vm.isReady"
                         class="col-lg-12 col-md-12 col-xs-12 no-padding fade-in ">
                        <no-content style="margin-top: 50px!important"
                                    ng-if="visitorInvitedByTransit.length == 0 && vm.showingData===true && vm.noDataFound ===false"
                                    icon="transfer_within_a_station"
                                    text="No hay vistantes en tránsito"></no-content>
                        <div class="table-scrollable " ng-if="visitorInvitedByTransit.length!=0" hide-xs hide-sm hide-md style="border: 0px!important; overflow-y:auto">
                            <table class="table table-bordered  table-hover font-13 gray-font tableMaterialDesign"
                                   infinite-scroll="vm.loadPage(vm.page + 1)"
                                   infinite-scroll-disabled="vm.page >= vm.links['last']"
                                   infinite-scroll-distance="1"
                                   infinite-scroll-container="'.all-content'">
                                <thead style="background-color: #fafafa;">
                                <tr>
                                    <th>Nombre completo</th>
                                    <th>Cédula</th>
                                    <th>Número de placa</th>
                                    <th>Entrada</th>
                                    <th>Salida</th>
                                    <th>Filial que visitó</th>
                                    <th class="text-center">Acción</th>
                                </tr>
                                </thead>
                                <tbody>
                                <tr ng-repeat="visitor in visitorInvitedByTransit | filter:vm.search ">
                                    <td>{{visitor.name + " " + visitor.lastname + " " + visitor.secondlastname}}</td>
                                    <td>{{visitor.identificationnumber}}</td>
                                    <td ng-if="visitor.licenseplate!=null">{{visitor.licenseplate}}</td>
                                    <td ng-if="visitor.licenseplate==null">No se registró</td>
                                    <td>{{visitor.arrivaltime | formatDate}}</td>
                                    <td ng-if="visitor.isinvited==4">Aún no ha salido</td>
                                    <td ng-if="visitor.isinvited==3">No se registró</td>
                                    <td ng-if="visitor.isinvited==5">{{visitor.invitationlimittime | formatDate}}</td>
                                    <td>{{visitor.houseNumber}}</td>
                                    <td class="text-center">
                                        <h5 class="text-center no-margin">
                                            <md-button class="md-primary md-raised orange-button-oficial no-margin"
                                                       ng-click="vm.registerExitFromVisitantsInTransitList(visitor)">
                                                Reportar salida
                                            </md-button>
                                        </h5>
                                    </td>
                                </tr>
                                </tbody>
                            </table>
                        </div>
                        <div class="fade-in col-md-12 no-padding" hide-lg hide-xl>
                            <div class="col-md-4 col-xs-12 col-sm-6 no-padding residentDivContainerXs"
                                 ng-repeat="visitor in visitorInvitedByTransit | filter:vm.search ">
                                <md-card md-theme="{{ showDarkTheme ? 'dark-blue' : 'default' }}"
                                         class="margin-bottom-10 residentCardContainer"
                                         md-theme-watch>
                                    <div layout="row" style="padding:5px">
                                        <div>
                                            <img class="img-circle" src="content/images/nobody-image.jpg" height="60"
                                                 width="60"/>
                                        </div>
                                        <div flex layout="column">
                                            <div layout="row" layout-align="space-between center">
                                                <div style="margin-left: 10px">
                                                    <span
                                                        class="md-headline font-15"><b>{{visitor.houseNumber}}</b></span>
                                                </div>
                                                <div style="margin-right: 10px">
                                                    <div layout="row" layout-align="center"
                                                         style="background: #f4f4f4;border-radius: 9%;margin-left: 10px;padding:1px 2px">
                                                        <div>
                                                            <md-icon ng-if="visitor.licenseplate!=undefined">
                                                                directions_car
                                                            </md-icon>
                                                            <md-icon ng-if="visitor.licenseplate==undefined">
                                                                directions_walk
                                                            </md-icon>
                                                        </div>
                                                        <div>{{visitor.licenseplate}}</div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div layout="row" layout-align="start" style="margin-top: -8px">
                                                <div style="margin-left: 10px">
                                                    <span class="md-headline font-15">{{visitor.name + " " + visitor.lastname + " " + visitor.secondlastname}}</span>
                                                </div>
                                            </div>
                                            <div style="margin-left: 10px">
                                                <span style="font-size: 13px">{{visitor.arrivaltime | formatDate}} - Aún no ha salido</span>
                                            </div>
                                            <md-button
                                                style="position: absolute; bottom: 16px;right: 11px;padding: 2px;min-height: 15px;height: 36px;font-size: 14px"
                                                class="md-primary md-raised orange-button-oficial no-margin"
                                                ng-click="vm.registerExitFromVisitantsInTransitList(visitor)">
                                                Reportar salida
                                            </md-button>
                                        </div>
                                    </div>
                                </md-card>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
</div>

