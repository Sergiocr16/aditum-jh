<div class=" col-lg-12 col-md-12 col-sm-12 col-xs-12" id="loading">
    <div class="spinnerLoading" style="margin:70px auto!important;margin-bottom:100px!important">
        <div class="double-bounce1"></div>
        <div class="double-bounce2"></div>
    </div>
</div>
<div class="col-md-12 display-none" id="data">
    <div class="col-md-12 no-padding">
        <div class="pull-left">
           <h2 class="bold uppercase" style="font-size:15px">Deudas vigentes <i class="fa fa-info-circle" style="color:#2a6496" angular-popover direction="right" template="<div style='padding:10px;width:250px;color:gray'><h5>Estas son las cuotas que actualmente debe la unidad.<h5></div>" mode="mouseover"></i></h2>
        </div>
            <div ng-show="vm.isEditing == false" class="btn-group pull-right ">
                <button class="btn btn-success red" ui-sref="generatePayment" style="margin-right:5px;"><i class="fa fa-money"></i> Realizar pago</button>
                <button class="btn btn-success" ng-click="vm.createCharge()"><i class="fa fa-plus"></i> Agregar cuotas</button>
                <button class="btn btn-primary" ng-show="vm.charges.length!=0" style="margin-left:5px" ng-click="vm.editing()"><i class="fa fa-pencil"></i> Editar cuotas</button>
            </div>

    </div>
    <hr>
    <div class="portlet-body">
        <h3 class="text-center" ng-show="vm.charges.length==0" style="margin-top:30px!important">La filial no tiene deudas vigentes</h3>
        <div  ng-show="vm.charges.length!=0">
            <form ng-submit="vm.edit()">
            <table class="table table-bordered ">
                <thead>
                <tr>
                    <th>
                        Fecha de cobro
                    </th>
                    <th>
                        Concepto
                    </th>
                    <th>
                        Categoría
                    </th>
                    <th>
                        Monto
                    </th>
                    <th  ng-show="vm.isEditing==false">
                        Recargo
                    </th>
                    <th  ng-show="vm.isEditing==false">
                        Total
                    </th>
                </tr>
                </thead>
                <tbody>

                 <tr ng-repeat="charge in vm.charges | orderBy: 'date'" ng-class="{'datePassed': charge.datePassed==true,'firstPassed': charge.definedFirstDatePassed}">
                     <td class="text-center" ng-show="vm.isEditing==false">
                         <span ng-show="charge.definedFirstDatePassed" style="float:left;margin-top:-18px;margin-left:-16px;z-index:9999" angular-popover direction="right" template="<div style='padding:5px;width:350px;color:#4DB3A2;font-weight:bolder'><h5 style='font-size:15px!important'>Estas son deudas futuras de la unidad, los usuarios no podran ver estas cuotas hasta que la fecha de cobro sea vigente o haya sido liquidado<h5></div>" mode="mouseover"><i class="fa fa-info-circle" style="color:#4DB3A2;font-size:18px;background:white"></i></span>
                         {{charge.date | date}}
                     </td>
                     <td ng-show="vm.isEditing==false">{{charge.concept}}</td>
                     <td ng-show="vm.isEditing==false">{{vm.getCategory(charge.type)}}</td>
                     <td ng-show="vm.isEditing==false">₡ {{charge.ammount | currency : "" : 0}}</td>
                     <td ng-show="vm.isEditing==false">₡ {{charge.subcharge | currency : "" : 0}}</td>
                     <td ng-show="vm.isEditing==false">₡ {{charge.total | currency : "" : 0}}</td>
                     <td class="text-center" ng-hide="vm.isEditing==false">
                         <div class="col-lg-12">
                             <input ng-model="charge.date" ng-click="vm.openCalendar(charge)"  enable-time="false" datetime-picker="dd MMMM yyyy" is-open="charge.openDate"
                                    type="text" class="form-control letters gray-font text-center dating" placeholder="Seleccione una fecha de vencimiento" required>
                         </div>
                     </td>
                     <td ng-hide="vm.isEditing==false"><input class="form-control letters gray-font" type="text" ng-model="charge.concept"></td>
                     <td ng-hide="vm.isEditing==false">
                         <select class="form-control gray-font" ng-model="charge.type" required>
                         <option value="1">Mantenimiento</option>
                         <option value="2">Extraordinaria</option>
                         <option value="3">Áreas comunes</option>
                     </select></td>
                     <td ng-hide="vm.isEditing==false">
                         <div class="cl-md-12">
                         <div class="input-group form-group col-lg-10" style="float:left">
                             <span class="input-group-addon">₡</span>
                             <input ng-class="{redBorder: charge.valida==false}" type="text" class="form-control numbers" placeholder="0.00" name="total"  ng-model="charge.ammount" ng-change="vm.validate(charge)" required />
                         </div>
                         <div class="col-lg-2">
                         <span style="cursor:pointer;padding: 2px 7px" ng-click="vm.deleteCharge(charge)" class="label-danger"> <i  class="fa fa-trash" style="color:white"></i></span>
                         </div>
                         </div>
                     </td>
                 </tr>

                </tbody>
            </table>
            <div ng-hide="vm.isEditing == false" class="btn-group pull-right" style="padding:5px">
                <button class="btn btn-danger" type="button" ng-click="vm.cancel()" style="margin:5px">Cancelar</button>
                <button type="submit" class="btn btn-success" style="margin:5px">Aceptar</button>
            </div>
            </form>
        </div>
    </div>
</div>
