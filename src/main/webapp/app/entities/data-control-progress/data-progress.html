<div class="page-bar route-title">
    <ul class="page-breadcrumb">
        <li>
            <i class="fa fa-home"></i>
            <a>Condominio</a>
            <i class="fa fa-angle-right"></i>
        </li>
        <li>
            <a>Progreso de ingreso de datos</a>
        </li>
    </ul>
    <div class="page-toolbar">
        <div class="btn-group pull-right"> </div>
    </div>
</div>
<div class=" col-lg-12 col-md-12 col-sm-12 col-xs-12" id="loadingIcon">
    <div class="spinnerLoading">
        <div class="double-bounce1"></div>
        <div class="double-bounce2"></div>
    </div>
</div>
<div class="row display-none" id="tableData">
    <div class="col-lg-12 col-md-12">
        <h2 class="col-md-12 hidden-xs"><button has-authority="ROLE_MANAGER" ui-sref="house" class="btn red">Atrás</button>    Progreso de ingreso de datos en viviendas</h2>
        <h4 class="col-md-12 hidden-lg hidden-md hidden-sm"><button has-authority="ROLE_MANAGER" ui-sref="house" class="btn red">Atrás</button>    Progreso de ingreso de datos en viviendas</h4>
        <div class="form-group col-md-12 col-sm-12 col-xs-12 small-margin-bottom no-padding" has-authority="ROLE_ADMIN">
            <div class="col-md-6">
                <label class="control-label no-padding gray-font">Seleccionar condominio</label>
                <select class="form-control gray-font" ng-change="vm.loadHouses(vm.company.id)" data-ng-model="vm.company" ng-options="company.name for company in vm.companies | orderBy: 'id' track by company.id" required>
                </select>
            </div>
        </div>
        <div class="col-lg-12 col-xs-12 col-md-12 col-sm-12" ng-show="vm.houses.length>0">
            <div class="portlet light">
                <div class="portlet-title">
                    <div class="caption">
                        <i class="icon-cursor font-purple-intense hide"></i>
                        <span class="caption-subject font-purple-intense bold uppercase">Estadísticas generales</span>
                    </div>
                </div>
                <div class="portlet-body">
                    <div class="row">
                        <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12" >
                            <div id="codigos-pie-chart" class="animated-pie-chart" style="height:400px!important"></div>

                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div >
            <div class="col-lg-5 col-md-5"  has-authority="ROLE_MANAGER"></div>
            <div class="col-lg-2 col-md-2"   has-authority="ROLE_ADMIN"></div>
            <div class="form-group  col-lg-3  col-md-3 col-sm-6 col-xs-12 no-padding" ng-show="vm.houses.length>0">
                <label class="col-md-5 col-sm-5  col-xs-4 control-label no-padding gray-font">Filtrar por casa</label>
                <div class="col-md-7 col-sm-7 col-xs-8 ">
                    <select class="form-control gray-font" ng-change="vm.findResidentsByHouse(vm.house)" data-ng-model="vm.house" ng-options="house.housenumber for house in vm.houses | orderBy: 'housenumber' track by house.id" required>
                        <option value="">Todas</option>
                    </select>
                </div>
            </div>
            <div class="form-group col-lg-4  col-md-4 col-sm-6 col-xs-12 no-padding" ng-show="vm.houses.length>0">
            <label class="col-md-4 col-sm-4  col-xs-4 control-label no-padding gray-font">Filtrar por progreso</label>
            <div class="col-md-8 col-sm-8 col-xs-8 ">
                <select class="form-control gray-font" data-ng-model="vm.filterState" required>
                    <option value="">Todos</option>
                    <option value="0">Código sin redimir</option>
                    <option value="1">Código redimido</option>
                    <option value="2">Ingreso en progreso</option>
                    <option value="3">Listo</option>
                </select>
            </div>
        </div>
            <button has-authority="ROLE_ADMIN" class="btn green col-lg-3 col-md-3 col-sm-6 col-xs-12" style="margin-bottom:5px" ng-click="vm.exportarCodigos()" ng-show="vm.houses.length>0">Exportar códigos a .txt <i class="fa fa-file"></i></button>
            <div class="portlet-body ">
                <h2 ng-show="vm.houses.length==0" class="text-center gray-font ">No existen casas en este condominio</h2>
                <div  style="padding:5px" class="hidden-lg hidden-md hidden-sm col-xs-12" ng-if="house.isdesocupated == 0" ng-repeat="house in vm.houses | filter:vm.house |  filter: {codeStatus:vm.filterState} | orderBy:'housenumber'">
                    <div class="col-xs-12">
                        <h4>Casa: <b>{{house.housenumber}}</b></h4>
                    </div>
                    <div class="col-xs-6">
                        <div class="col-xs-12 no-padding">
                            Código de ingreso: {{house.loginCode}}
                        </div>
                    </div>
                    <div class="col-xs-6">
                        <span style="height:100%!important;" ng-show="house.codeStatus == 0" class="padding-10 col-lg-12 col-md-12 col-sm-12 col-xs-12 label label-sm label-danger" aria-hidden="false">Código sin redimir </span>
                        <span style="height:100%!important;" ng-show="house.codeStatus == 1" class="padding-10  col-lg-12 col-md-12 col-sm-12 col-xs-12 label label-sm label-info" aria-hidden="false" style="background-color:#4d90d6!important">Código redimido </span>
                        <span style="height:100%!important;" ng-show="house.codeStatus == 2" class="padding-10 col-lg-12 col-md-12 col-sm-12 col-xs-12 label label-sm label-warning " aria-hidden="false">Ingreso de datos en progreso </span>
                        <span style="height:100%!important;" ng-show="house.codeStatus == 3" class="padding-10 col-lg-12 col-md-12 col-sm-12 col-xs-12 label label-sm label-success" aria-hidden="false">Todo Listo </span>

                    </div>
                    <hr class="col-xs-12">
                </div>
                <div class="table-scrollable">

                    <table ng-show="vm.houses.length>0" class="table table-striped table-hover font-12 hidden-xs">
                        <thead>
                        <tr>
                            <th>Número de casa</th>
                            <th>Código de ingreso</th>
                            <th>Progreso de ingreso de datos</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr ng-if="house.isdesocupated == 0" ng-repeat="house in vm.houses | filter:vm.house |  filter: {codeStatus:vm.filterState} | orderBy:'housenumber'">
                            <td style="text-transform: capitalize;">{{house.housenumber}}</td>
                            <td style="text-transform: capitalize;">{{house.loginCode}}</td>
                            <td  ng-if="house.codeStatus == 0"><span class="padding-10 col-lg-12 col-md-12 col-sm-12 col-xs-12 label label-sm label-danger" aria-hidden="false">Código sin redimir </span></td>
                            <td ng-if="house.codeStatus == 1"><span class="padding-10  col-lg-12 col-md-12 col-sm-12 col-xs-12 label label-sm label-info" aria-hidden="false" style="background-color:#4d90d6!important">Código redimido </span></td>
                            <td  ng-if="house.codeStatus == 2"><span class="padding-10 col-lg-12 col-md-12 col-sm-12 col-xs-12 label label-sm label-warning " aria-hidden="false">Ingreso de datos en progreso </span></td>
                            <td ng-if="house.codeStatus == 3"><span class="padding-10 col-lg-12 col-md-12 col-sm-12 col-xs-12 label label-sm label-success" aria-hidden="false">Todo Listo </span></td>
                        </tr>
                        </tbody>
                    </table>
                </div>

            </div>
        </div>
    </div>
</div>

