<!-- SE REQUIERE EN CADA VISTA -->
<div class="page-bar route-title">
    <ul class="page-breadcrumb">
        <li>
            <i class="fa fa-home"></i>
            <a>Condominio</a>
            <i class="fa fa-angle-right"></i>
        </li>
        <li>
            <a>Noticias</a>
        </li>
    </ul>
    <div class="page-toolbar">
        <div class="btn-group pull-right" style="padding-top:10px;">
            <i class="fa fa-lightbulb-o" style="font-size:20px; color:orange"></i>
        </div>
    </div>
</div>
<div class=" col-lg-12 col-md-12 col-sm-12 col-xs-12" id="loadingIcon">
    <div class="spinnerLoading">
        <div class="double-bounce1"></div>
        <div class="double-bounce2"></div>
    </div>
</div>
<div class="display-none" id="tableData" class="container">
    <div ng-show="vm.announcements == 0">
        <h2 class="text-center gray-font">El condominio no ha realizado ningún anuncio aún.</h2>
    </div>
    <div infinite-scroll="vm.loadPage(vm.page + 1)"
         infinite-scroll-disabled="vm.page >= vm.links['last']" class="row">
        <div class="announcement margin-bottom-25 col-md-12"
             ng-repeat="announcement in vm.announcements track by announcement.id">
            <h2 class="announcement-title">
                {{announcement.title}}
                <spam style="float: right;font-size:12px;color:#616770;">{{announcement.publishingDate}}</spam>
            </h2>
            <div>
                <div ng-bind-html="announcement.description"></div>
            </div>
            <hr style="margin-bottom: 8px!important">
            <div class="col-md-12 margin-bottom-10 comments-button" ng-click="vm.loadComments(announcement)">
                Comentarios ({{announcement.commentsQuantity}})
            </div>
            <div ng-if="announcement.showingComments==true" class="col-md-12 no-padding">
                <div class="col-md-12  no-padding" style="margin-bottom:10px;"
                     ng-repeat="comment in announcement.comments track by comment.id">
                    <div class="col-md-1">
                        <div class="image" style="float: right">
                            <img ng-hide="comment.resident.image_url" class="object-fit_scale-down"
                                 src="content/images/nobody-image.jpg"/>
                            <img ng-show="comment.resident.image_url!==null" src="{{comment.resident.image_url}}"
                                 class="object-fit_scale-down"/>
                        </div>
                    </div>
                    <div ng-class="{'announcement-comment-description' : comment.editing===false}" class="col-md-11">
                        <span style="color:#365899; font-weight: bold;" ng-if="comment.editing===false">{{comment.resident.name +" "+ comment.resident.lastname +" "+ comment.resident.secondlastname}} </span>
                        <p style="display: inline" ng-if="comment.editing===false">{{comment.comment}}</p>
                        <textarea ng-if="comment.editing===true" class="comment-input col-md-12 textarea" type="text"
                                  ng-model="comment.newComment"
                                  placeholder="Editar comentario..." required></textarea>
                    </div>
                    <div>
                        <button
                            style="border: none;background-color: white;color: #616770;font-size: 11px;margin:5px;cursor:default"
                            class="comments-button" ng-if="comment.editing===false">{{comment.creationDate}}
                        </button>
                        <button style="border: none;background-color: white;color: #616770;font-size: 11px;margin:5px"
                                class="comment-actions float-right"
                                ng-if="vm.showActionDelete(comment) && comment.editing===false">Eliminar
                        </button>
                        <button style="border: none;background-color: white;color: #616770;font-size: 11px;margin:5px"
                                class="comment-actions float-right" ng-click="vm.editComment(comment)"
                                ng-if="vm.showActionEdit(comment)  && comment.editing===false">Editar
                        </button>
                        <button style="border: none;background-color: white;color: #616770;font-size: 11px;margin:5px"
                                class="comment-actions float-right" ng-click="vm.cancelEditing(comment)"
                                ng-if="comment.editing===true">Cancelar
                        </button>
                        <button style="border: none;background-color: white;color: #616770;font-size: 11px;margin:5px"
                                class="comment-actions float-right" ng-click="vm.submitEditComment(comment, announcement)"
                                ng-if="comment.editing===true">Editar comentario <i class="fa fa-paper-plane"
                                                                                    aria-hidden="true"></i>
                        </button>
                    </div>
                </div>
            </div>
            <div>

                <div class="col-md-12 no-padding">
                    <hr style="margin-top:0px!important">
                    <form ng-submit="vm.saveComment(announcement)">
                        <div class="col-md-1">
                            <div class="image" style="float: right">
                                <img ng-hide="currentUserImage" src="content/images/nobody-image.jpg"
                                     class="object-fit_scale-down"/>
                                <img ng-show="currentUserImage!==null" src="{{currentUserImage}}"
                                     class="object-fit_scale-down"/>
                            </div>
                        </div>
                        <div class="col-md-11">
                     <textarea class="comment-input col-md-12 textarea" type="text"
                               ng-model="announcement.currentComment.comment"
                               placeholder="Escribe un comentario..." required></textarea>
                        </div>
                        <div class="col-md-11 col-md-offset-1">
                            <button type="submit"
                                    style="border: none;background-color: white;color: #616770;font-size: 11px;margin:5px"
                                    class="comments-button float-right">
                                Enviar comentario <i class="fa fa-paper-plane" aria-hidden="true"></i>
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
