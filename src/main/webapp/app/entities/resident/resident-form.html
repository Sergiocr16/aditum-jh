
<div class="page-bar route-title">
    <ul ng-if="companyUser.id !== vm.resident.id" class="page-breadcrumb">
        <li>
            <i class="fa fa-home"></i>
            <a ui-sref="home()">Condominio</a>
            <i class="fa fa-angle-right"></i>
        </li>
        <li has-authority="ROLE_MANAGER">
            <a href="" ui-sref="resident()">Residentes</a>
            <i class="fa fa-angle-right"></i>
        </li>
        <li has-authority="ROLE_USER">
            <a href="" ui-sref="residentByHouse()">Residentes</a>
            <i class="fa fa-angle-right"></i>
        </li>
        <li>
            <a href="">{{vm.title}}</a>
        </li>
    </ul>
    <ul ng-if="companyUser.id === vm.resident.id" class="page-breadcrumb">
        <li>
            <i class="fa fa-user"></i>
            <a>Mi perfil</a>
            <i class="fa fa-angle-right"></i>
        </li>
        <li>
            <a >Administrar</a>
            <i class="fa fa-angle-right"></i>
        </li>
        <li>
            <a href="">Información</a>
        </li>
    </ul>
    <div class="page-toolbar">
        <div class="btn-group pull-right"> </div>
    </div>
</div>
<div class=" col-lg-12 col-md-12 col-sm-12 col-xs-12" id="loadingIcon">
    <div class="spinnerLoading">
        <div class="double-bounce1"></div>
        <div class="double-bounce2"></div>
    </div>
</div>
<div class="display-none" id="edit_resident_form">
    <div class="row">
        <div class="col-md-12">
            <form ng-submit="vm.save()">
                <div class="portlet light bordered">
                    <div class="portlet-title">
                        <div class="caption font-green-haze">
                            <i class="fa fa-user font-green-haze"></i>
                            <span ng-if="vm.resident.userLogin===null || vm.resident.id === null" class="caption-subject bold uppercase">{{vm.title }}</span>
                            <span ng-if="vm.resident.userLogin!==null && vm.resident.id !== null" class="caption-subject bold uppercase">Editar información [{{vm.resident.userLogin}}]</span>
                        </div>
                    </div>
                    <div class="portlet-body form">
                        <div has-any-authority="ROLE_MANAGER,ROLE_ADMIN" class="col-md-offset-9 col-md-3 col-sm-offset-8 col-sm-4 col-xs-12">
                            <span class=" font-15 gray-font col-md-10 col-sm-10 col-xs-10">Autorizado de filial: </span>
                            <div class="lg-checkbox-list col-md-2 col-sm-2 col-xs-2">
                                <div class="md-checkbox">
                                    <input type="checkbox"  ng-model="vm.resident.isOwner" id="checkbox1" class="md-check">
                                    <label for="checkbox1">
                                        <span></span>
                                        <span class="check"></span>
                                        <span class="box"></span>
                                    </label>
                                </div>
                            </div>
                        </div>
                        <h3 class="text-center no-margin" ng-hide="vm.displayImage || vm.resident.image_url!==null" >
                            <img width="200" height="200" class="img-circle" src="content/images/nobody-image.jpg"/>
                        </h3>
                        <h3 class="text-center no-margin"  ng-hide="vm.displayImage || vm.resident.image_url===null" >
                            <img width="200" height="200" class="img-circle" src="{{vm.resident.image_url}}"/>
                        </h3>
                        <div class="form-group form-md-line-input" ngf-drop ngf-change="vm.setImage($file)" ngf-pattern="'image/*'">
                            <div ng-if="vm.displayImage" class="image-overlay-position" >
                                <div class="image-overlay-container image-overlay-view-first">
                                    <h3 class="text-center no-margin">
                                        <img data-ng-src="{{'data:' + vm.displayImageType + ';base64,' + vm.displayImage}}" width="170px" height="170px" class="img-circle" alt="imageUser image"/>
                                    </h3>
                                </div>
                            </div>
                            <h5 class="text-center font-green-haze">Para mejor calidad la imagen debe ser tamaño cuadrado</h5>
                            <h3 class="text-center">
                                <button type="button" ngf-select class="btn default btn-file fileinput-new gray-font"
                                        ngf-change="vm.setImage($file)" accept="image/*" >
                                    Subir imagen
                                </button>
                            </h3>


                            <div class="col-lg-6 col-md-6 col-sm-6 marging-top-20">
                            <div class="form-group form-md-line-input">
                                <input ng-model="vm.resident.name" type="text" class="form-control letters gray-font" required style="text-transform: capitalize;">
                                <label  class="font-15">Nombre</label>
                            </div>
                            <div class="form-group form-md-line-input">
                                <input ng-model="vm.resident.lastname" type="text" class="form-control letters gray-font" required style="text-transform: capitalize;">
                                <label  class="font-15">Primer Apellido</label>
                            </div>
                            <div class="form-group form-md-line-input">
                                <input ng-model="vm.resident.secondlastname" type="text" class="form-control letters gray-font" required style="text-transform: capitalize;">
                                <label class="font-15">Segundo Apellido</label>
                            </div>
                            <div has-authority="ROLE_MANAGER" class="form-group form-md-line-input">
                                <input ng-model="vm.resident.identificationnumber" type="text" class="form-control gray-font" required style='text-transform:uppercase'>
                                <label  class="font-15">Número de cédula</label>
                                <span class="help-block">Escriba el número de cédula sin guiones ni espacios.</span>
                            </div>
                        </div>

                        <div class="col-lg-6 col-md-6 col-sm-6 marging-top-20">

                            <div class="form-group form-md-line-input">
                                <input ng-focus="expression==1" ng-model="vm.resident.phonenumber" type="text" placeholder="" maxlength="20" class="form-control numbers gray-font">
                                <label class="font-15">Número celular</label>
                                <span class="help-block">Escriba el número celular sin guiones.</span>
                            </div>
                            <div class="form-group form-md-line-input ">
                                <input ng-model="vm.resident.email" type="email" class="form-control gray-font" placeholder="">
                                <label class="font-15">Correo electrónico</label>
                            </div>
                            <div class="form-group form-md-line-input has-info" ng-if="vm.resident.enabled==1">
                                <select ng-disabled="vm.validEmail(vm.resident.email)==false" class="form-control gray-font"  ng-model="vm.resident.principalContact" >
                                    <option value="1">Si</option>
                                    <option value="0">No</option>
                                </select>
                                <label class="font-15 ">Contacto principal de la filial</label >
                            </div>

                            <div has-authority="ROLE_USER" class="form-group form-md-line-input">
                                <input ng-model="vm.resident.identificationnumber" type="text" class="form-control  gray-font" required style='text-transform:uppercase'>
                                <label  class="font-15">Número de cédula</label>
                                <span class="help-block">Escriba el número de cédula sin guiones ni espacios.</span>
                            </div>

                            <div has-authority="ROLE_MANAGER" class="form-group form-md-line-input has-info">
                            <select class="form-control gray-font" id="field_house"  ng-model="vm.resident.houseId" ng-options="house.id as house.housenumber for house in vm.houses | orderBy: 'housenumber'"  ng-required='vm.required==1'>
                                <option value="">Seleccione una casa</option>
                            </select>
                                <label class="font-15 ">Número de casa</label >
                            </div>
                        </div>
                        <div class="col-md-6 col-sm-6 hidden-xs" style="height: 45px;"></div>

                        <div class="form-actions noborder">
                            <h3 class="text-right ">
                                <button type="submit" class="btn blue"><i class="fa fa-pencil " ng-disabled="editForm.$invalid || vm.isSaving"  ng-show="vm.button=='Editar'"></i> {{vm.button}}</button>
                                <button has-authority="ROLE_MANAGER" type="button" ui-sref="resident()" class="btn red default">Cancelar</button>
                                <button has-authority="ROLE_USER" type="button" ui-sref="residentByHouse()" class="btn red default">Cancelar</button>
                            </h3>
                        </div>
                    </div>
                </div>
                </div>

            </form>
        </div>
    </div>
</div>
